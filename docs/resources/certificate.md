---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "keyfactor_certificate Resource - terraform-provider-keyfactor"
subcategory: ""
description: |-
  
---

# keyfactor_certificate (Resource)



## Example Usage

```terraform
provider "keyfactor" {
  username = "COMMAND\\your_username"
  password = "your_api_password"
  hostname = "mykfinstance.kfdelivery.com"
}

## PFX Enrollment
resource "keyfactor_certificate" "PFXCertificate" {
  subject = {
    # Certificate subject metadata
    subject_common_name         = "mypfx.kfdelivery.com"
    subject_organization        = "Keyfactor"
    subject_locality            = "Cleveland"
    subject_country             = "US"
    subject_organizational_unit = "Software Development"
    subject_state               = "OH"
  }

  # Optional SANs
  ip_sans               = ["192.168.123.2", "172.51.2.4"] # Optional IP SANs
  dns_sans              = ["meow.example.com", "meow2"]   # Optional DNS SANs
  key_password          = "my certificate password!"      # The password for the certificate. Note: This is bad practice, use TF_VAR_<variable_name> instead.
  certificate_authority = "COMMAND\\MY_CA_01"             # Keyfactor CA to use to handle the certificate request.
  certificate_template  = "2yrWebServer"                  # The template shortname to use for the certificate.
}

## CSR Enrollment
resource "tls_private_key" "rsa_4096" {
  # Create a private key for the certificate request.
  algorithm = "RSA"
  rsa_bits  = 4096
}

resource "tls_cert_request" "csr" {
  # Create a CSR using the TLS private key above
  private_key_pem = tls_private_key.rsa_4096.private_key_pem

  subject {
    common_name         = "mycsr.kfdelivery.com"
    organization        = "Keyfactor"
    country             = "US"
    locality            = "Seattle"
    organizational_unit = "DevOps Enablement"
    postal_code         = "12345"
    province            = "WA"
    street_address      = ["123 Main St", "Suite 1", "Second Floor", "Downtown"]
  }
}

resource "keyfactor_certificate" "kf_csr_cert" {
  csr                   = tls_cert_request.csr.cert_request_pem
  certificate_authority = "COMMAND\\MY_CA_01"
  certificate_template  = "2yrWebServer"

  dns_sans = ["mycsr.kfdelivery.com"]         # Optional DNS SANs
  ip_sans  = ["172.16.0.2", "192.168.0.2"]    # Optional IP SANs
  uri_sans = ["https://mycsr.kfdelivery.com"] # Optional URI SANs
  metadata = {
    "Email-Contact" = "my_username@mydomain.com" # Note: metadata keys must be defined in Keyfactor and cannot just be arbitrarily added
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `certificate_authority` (String) Name of certificate authority to deploy certificate with Ex: Example Company CA 1
- `certificate_template` (String) Short name of certificate template to be deployed

### Optional

- `csr` (String) Base-64 encoded certificate signing request (CSR)
- `dns_sans` (List of String) List of DNS names to use as subjects of the certificate
- `ip_sans` (List of String) List of DNS names to use as subjects of the certificate
- `key_password` (String, Sensitive) Password to protect certificate and private key with
- `metadata` (Map of String) Metadata key-value pairs to be attached to certificate
- `subject` (Attributes) KeyfactorCertificate subject (see [below for nested schema](#nestedatt--subject))
- `uri_sans` (List of String) List of URIs to use as subjects of the certificate

### Read-Only

- `certificate_chain` (String) PEM formatted certificate chain
- `certificate_pem` (String) PEM formatted certificate
- `issuer_dn` (String) Issuer distinguished name that signed the certificate
- `keyfactor_id` (Number) Keyfactor certificate ID
- `keyfactor_request_id` (Number) Keyfactor request ID necessary for deploying certificate
- `private_key` (String, Sensitive) PEM formatted PKCS#1 private key imported if cert_template has KeyRetention set to a value other than None, and the certificate was not enrolled using a CSR.
- `serial_number` (String) Serial number of newly enrolled certificate
- `thumbprint` (String) Thumbprint of newly enrolled certificate

<a id="nestedatt--subject"></a>
### Nested Schema for `subject`

Optional:

- `subject_common_name` (String) Subject common name for new certificate
- `subject_country` (String) Subject country for new certificate
- `subject_locality` (String) Subject locality for new certificate
- `subject_organization` (String) Subject organization for new certificate
- `subject_organizational_unit` (String) Subject organizational unit for new certificate
- `subject_state` (String) Subject state for new certificate

## Import

Import is supported using the following syntax:

```shell
terraform import keyfactor_certificate.mycert 65 # Where this is the ID of the certificate on Keyfactor
```
