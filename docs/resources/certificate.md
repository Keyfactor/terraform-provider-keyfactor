---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "keyfactor_certificate Resource - terraform-provider-keyfactor"
subcategory: ""
description: |-
  
---

# keyfactor_certificate (Resource)



## Example Usage

```terraform
provider "keyfactor" {
  username = "your_username"
  password = "your_api_password"
  hostname = "mykfinstance.kfdelivery.com"
  domain   = "mydomain.com"
}

## PFX Enrollment
resource "keyfactor_certificate" "pkcs12_enrollment" {
  common_name         = "My PKCS12 Certificate"
  country             = "US"
  state               = "Ohio"
  locality            = "Cleveland"
  organization        = "Keyfactor"
  organizational_unit = "Engineering"
  ip_sans             = sort(["192.168.123.2", "172.51.2.4"])
  dns_sans            = sort(["my.pkcs12.io", "My PKCS12 Certificate", "my.pkcs12.co.uk", "Certificate PKCS12 My"])
  uri_sans            = sort(["my.pkcs12.io"])
  key_password        = "Don't put this in your production code!"
  // Please don't use this password in production pass in an environmental or TF_VAR_ variable.
  certificate_authority = "COMMAND\\MY_CA_01"
  certificate_template  = "2yrWebServer"
  metadata = {
    "Email-Contact" = "kfadmin@keyfactor.com"
  }
}

## CSR Enrollment
resource "tls_private_key" "rsa_4096" {
  # Create a private key for the certificate request.
  algorithm = "RSA"
  rsa_bits  = 4096
}

resource "tls_cert_request" "csr" {
  # Create a CSR using the TLS private key above
  private_key_pem = tls_private_key.rsa_4096.private_key_pem

  subject {
    common_name         = "mycsr.kfdelivery.com"
    organization        = "Keyfactor"
    country             = "US"
    locality            = "Seattle"
    organizational_unit = "DevOps Enablement"
    postal_code         = "12345"
    province            = "WA"
    street_address      = ["123 Main St", "Suite 1", "Second Floor", "Downtown"]
  }
}

resource "keyfactor_certificate" "kf_csr_cert" {
  csr                   = tls_cert_request.csr.cert_request_pem
  certificate_authority = "COMMAND\\MY_CA_01"
  certificate_template  = "2yrWebServer"

  dns_sans = ["mycsr.kfdelivery.com"]         # Optional DNS SANs
  ip_sans  = ["172.16.0.2", "192.168.0.2"]    # Optional IP SANs
  uri_sans = ["https://mycsr.kfdelivery.com"] # Optional URI SANs
  metadata = {
    "Email-Contact" = "my_username@mydomain.com"
    # Note: metadata keys must be defined in Keyfactor and cannot just be arbitrarily added
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `certificate_authority` (String) Name of certificate authority to deploy certificate with Ex: Example Company CA 1
- `certificate_template` (String) Short name of certificate template to be deployed

### Optional

- `common_name` (String) Subject common name (CN) of the certificate.
- `country` (String) Subject country of the certificate
- `csr` (String) Base-64 encoded certificate signing request (CSR)
- `dns_sans` (List of String) List of DNS names to use as subjects of the certificate. NOTE: Because changes to this field trigger replacement, use Terraform's `sort()` function to ensure consistent ordering of the list.
- `ip_sans` (List of String) List of DNS names to use as subjects of the certificate. NOTE: Because changes to this field trigger replacement, use Terraform's `sort()` function to ensure consistent ordering of the list.
- `key_password` (String, Sensitive) Password used to recover the private key from Keyfactor Command. NOTE: If no value is provided a random password will be generated for key recovery. This value is not stored and does not encrypt the private key in Terraform state. Also note that if a password is provided it must meet any password complexity requirements enforced by the CA template or creation will fail. Auto-generated passwords will be of length 32 and contain a minimum of 4 of the following: uppercase, lowercase, numeric, and special characters.
- `key_size` (Number) Required*. A string indicating the key size for the requested key. Supported key sizes are:
	- 255
	- 256
	- 384
	- 448
	- 521
	- 2048
	- 3072
	- 4096
	- 8192  
This value is required only if KeyType = RSA.
- `key_type` (String) Required. A string indicating the algorithm for the request. Supported values are:
	- RSA
	- ECC
	- Ed448
	- Ed25519
- `locality` (String) Subject locality (L) of the certificate
- `metadata` (Map of String) Metadata key-value pairs to be attached to certificate
- `organization` (String) Subject organization (O) of the certificate
- `organizational_unit` (String) Subject organizational unit (OU) of the certificate
- `state` (String) Subject state (ST) of the certificate
- `uri_sans` (List of String) List of URIs to use as subjects of the certificate. NOTE: Because changes to this field trigger replacement, use Terraform's `sort()` function to ensure consistent ordering of the list.

### Read-Only

- `ca_certificate` (String) PEM formatted CA certificate
- `certificate_chain` (String) PEM formatted full certificate chain
- `certificate_id` (Number) Keyfactor Command certificate ID.
- `certificate_pem` (String) PEM formatted certificate
- `collection_id` (Number) Optional certificate collection identifier used to ensure user access to the certificate.
- `command_request_id` (Number) Keyfactor request ID.
- `identifier` (String) Keyfactor certificate identifier. This can be any of the following values: thumbprint, CN, or Keyfactor Command Certificate ID. If using CN to lookup the last issued certificate, the CN must be an exact match and if multiple certificates are returned the certificate that was most recently issued will be returned.
- `issuer_dn` (String) Issuer distinguished name that signed the certificate
- `private_key` (String, Sensitive) PEM formatted PKCS#1 private key imported if cert_template has KeyRetention set to a value other than None, and the certificate was not enrolled using a CSR.
- `serial_number` (String) Serial number of newly enrolled certificate
- `thumbprint` (String) Thumbprint of newly enrolled certificate

## Import

Import is supported using the following syntax:

```shell
terraform import keyfactor_certificate.mycert 65 # Where this is the ID of the certificate on Keyfactor
```
