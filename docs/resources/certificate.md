---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "keyfactor_certificate Resource - terraform-provider-keyfactor"
subcategory: "Security & Authentication"
description: |-
    Terraform resource for interacting with Certificate endpoint
  
---

# keyfactor_certificate (Resource)
The ```keyfactor_certificate``` resource is used to enroll and
manage certificates stored by Keyfactor. If no CSR is supplied,
this resource will enroll a PFX certificate with Keyfactor, and
store the new certificate as schema data associated with the
resource. Certificate formats that are currently used are PKCS#12
and PEM.

## Example Usage
```terraform
resource "keyfactor_certificate" "PFXCertificate" {
  provider = keyfactor.command
  certificate {
    subject {
      subject_common_name         = "terraform"
      subject_organization        = "example"
      subject_locality            = "Springfield"
      subject_country             = "US"
      subject_organizational_unit = "SE"
      subject_state               = "NA"
    }
    sans {
      san_ip4 = ["192.168.123.2", "172.51.2.4"]
      san_uri = ["example.com"]
    }
    metadata {
      name  = "Department"
      value = "Engineering"
    }
    metadata {
      name  = "Email-Contact"
      value = "admin@example.com"
    }
    key_password          = "P@s5w0Rd2321!"
    certificate_authority = "keyfactor.example.com\\CA 1"
    cert_template         = "WebServer1yr"
      
    deployment {
        store_ids      = ["Keyfactor certificate store GUID"]
        store_type_ids = ["Keyfactor store type ID"]
        alias          = ["terraform"]
    }
  }
}
```

Keyfactor enables the attachment of metadata to each certificate
managed by Keyfactor products. Note that metadata is not directly
attached to the contents of the certificate, but can be used as
searchable or identifying attributes within Keyfactor. Specifying
metadata is done by adding a ```metadata``` schema to the Terraform
configuration document. As many of these fields can be specified
as a user requires. Values are stored as ```name:value``` pairs
inside two strings for each metadata schema item. The above example
shows the configuration of two metadata fields.

#### Deployment schema
If a ```deployment``` schema element is provided, Terraform will
automatically attempt to deploy the certificate into the provided
certificate store ID. Future updates to the provider will include
this functionality as a separate resource.


<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **certificate** (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--certificate))

### Optional

- **id** (String) The ID of this resource.

<a id="nestedblock--certificate"></a>
### Nested Schema for `certificate`

Required:

- **cert_template** (String) Short name of certificate template to be deployed
- **certificate_authority** (String) Name of certificate authority to deploy certificate with Ex: Example Company CA 1
- **subject** (Block List, Min: 1, Max: 1) Certificate subject (see [below for nested schema](#nestedblock--certificate--subject))

Optional:

- **collection_id** (Number) Collection identifier used to validate user permissions (if service account has global permissions, this is not needed)
- **csr** (String) Base-64 encoded certificate signing request (CSR)
- **deployment** (Block List, Max: 1) PFX certificate deployment options (certificate format must be STORE) (see [below for nested schema](#nestedblock--certificate--deployment))
- **key_password** (String) Password to protect certificate and private key with
- **metadata** (Block List) Metadata key-value pairs to be attached to certificate (see [below for nested schema](#nestedblock--certificate--metadata))
- **sans** (Block List, Max: 1) Certificate subject-alternative names (see [below for nested schema](#nestedblock--certificate--sans))

Read-Only:

- **certificate_pem** (String) PEM formatted certificate
- **issuer_dn** (String) Issuer distinguished name that signed the certificate
- **keyfactor_id** (Number) Keyfactor certificate ID
- **keyfactor_request_id** (Number) Keyfactor request ID necessary for deploying certificate
- **serial_number** (String) Serial number of newly enrolled certificate
- **thumbprint** (String) Thumbprint of newly enrolled certificate

<a id="nestedblock--certificate--subject"></a>
### Nested Schema for `certificate.subject`

Optional:

- **subject_common_name** (String) Subject common name for new certificate
- **subject_country** (String) Subject country for new certificate
- **subject_locality** (String) Subject locality for new certificate
- **subject_organization** (String) Subject organization for new certificate
- **subject_organizational_unit** (String) Subject organizational unit for new certificate
- **subject_state** (String) Subject state for new certificate


<a id="nestedblock--certificate--deployment"></a>
### Nested Schema for `certificate.deployment`

Optional:

- **alias** (List of String) Alias that certificate will be stored under in new certificate
- **store_ids** (List of String) List of store IDs to deploy PFX certificate into
- **store_type_ids** (List of Number) List of store IDs to deploy PFX certificate into


<a id="nestedblock--certificate--metadata"></a>
### Nested Schema for `certificate.metadata`

Optional:

- **name** (String) Name of metadata field as seen in Keyfactor
- **value** (String) Metadata value


<a id="nestedblock--certificate--sans"></a>
### Nested Schema for `certificate.sans`

Optional:

- **san_dns** (List of String) List of DNS names to use as subjects of the certificate
- **san_ip4** (List of String) List of IPv4 addresses to use as subjects of the certificate
- **san_uri** (List of String) List of IPv6 addresses to use as subjects of the certificate


